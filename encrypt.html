<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ–‡å­—åŠ å¯†è§£å¯†ç³»ç»Ÿ | Text Encryption System</title>
    <meta name="description" content="åŸºäºAES-GCMç®—æ³•çš„å®‰å…¨æ–‡å­—åŠ å¯†è§£å¯†å·¥å…·">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #6366f1;
            --secondary-color: #8b5cf6;
            --success-color: #10b981;
            --error-color: #ef4444;
            --warning-color: #f59e0b;
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: #ffffff;
            --text-color: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans SC', sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 2rem 1rem;
            color: var(--text-color);
        }

        .container {
            max-width: 1000px;
            width: 100%;
            margin: 0 auto;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* å¤´éƒ¨ */
        .header {
            text-align: center;
            margin-bottom: 2rem;
            animation: fadeInDown 0.6s ease;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .header .subtitle {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 400;
        }

        /* ä¸»å¡ç‰‡ */
        .main-card {
            background: var(--card-bg);
            border-radius: 1.5rem;
            box-shadow: var(--shadow);
            padding: 2.5rem;
            margin-bottom: 2rem;
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ç®—æ³•è¯´æ˜ */
        .algorithm-info {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
            border-left: 4px solid var(--primary-color);
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin-bottom: 2rem;
        }

        .algorithm-info h3 {
            color: var(--primary-color);
            font-size: 1.125rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .algorithm-info ul {
            list-style: none;
            padding-left: 0;
        }

        .algorithm-info li {
            padding: 0.5rem 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .algorithm-info li::before {
            content: "âœ“";
            color: var(--success-color);
            font-weight: bold;
        }

        /* å¯†é’¥è¾“å…¥ */
        .key-section {
            margin-bottom: 2rem;
        }

        .key-section label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-color);
            font-size: 1rem;
        }

        .key-input-wrapper {
            position: relative;
            display: flex;
            gap: 0.75rem;
        }

        .key-input {
            flex: 1;
            padding: 1rem 1.25rem;
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .key-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }

        .toggle-key-btn {
            padding: 0 1.25rem;
            background: var(--border-color);
            border: none;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.25rem;
        }

        .toggle-key-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        /* æ–‡æœ¬åŒºåŸŸ */
        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .text-area-wrapper {
            margin-bottom: 1.5rem;
        }

        .text-area {
            width: 100%;
            min-height: 150px;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 0.75rem;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
            background: white;
        }

        .text-area:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }

        .char-count {
            text-align: right;
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        /* æ“ä½œæŒ‰é’® */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 0.75rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-secondary:hover {
            background: var(--primary-color);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ç»“æœæ˜¾ç¤º */
        .result-box {
            background: #f8fafc;
            border: 2px dashed var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            min-height: 150px;
            word-break: break-all;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: var(--text-color);
            position: relative;
        }

        .result-box.has-content {
            border-color: var(--success-color);
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        }

        .placeholder {
            color: var(--text-secondary);
            font-style: italic;
        }

        .copy-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.5rem 1rem;
            background: var(--success-color);
            color: white;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: #059669;
        }

        /* æç¤ºæ¶ˆæ¯ */
        .toast {
            position: fixed;
            top: 2rem;
            right: 2rem;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            color: white;
            font-weight: 500;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            animation: slideInRight 0.3s ease;
            z-index: 1000;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .toast.success {
            background: var(--success-color);
        }

        .toast.error {
            background: var(--error-color);
        }

        /* é¡µè„š */
        .footer {
            text-align: center;
            padding: 2rem 1rem;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.875rem;
        }

        .footer-divider {
            width: 60px;
            height: 3px;
            background: rgba(255, 255, 255, 0.5);
            margin: 1.5rem auto;
            border-radius: 2px;
        }

        .tips {
            margin: 1rem 0;
            line-height: 1.8;
        }

        .tips strong {
            font-weight: 600;
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            body {
                padding: 1rem 0.5rem;
            }

            .header h1 {
                font-size: 1.75rem;
            }

            .main-card {
                padding: 1.5rem;
                border-radius: 1rem;
            }

            .action-buttons {
                grid-template-columns: 1fr;
            }

            .toast {
                right: 1rem;
                left: 1rem;
                top: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>ğŸ” æ–‡å­—åŠ å¯†è§£å¯†ç³»ç»Ÿ</h1>
            <div class="subtitle">Text Encryption & Decryption System</div>
        </div>

        <!-- ä¸»å¡ç‰‡ -->
        <div class="main-card">
            <!-- ç®—æ³•è¯´æ˜ -->
            <div class="algorithm-info">
                <h3>ğŸ›¡ï¸ åŠ å¯†ç®—æ³•è¯´æ˜</h3>
                <ul>
                    <li>åŠ å¯†ç®—æ³•ï¼šAES-GCM (256-bit)</li>
                    <li>å¯†é’¥æ´¾ç”Ÿï¼šSHA-256 å“ˆå¸Œç®—æ³•</li>
                    <li>åˆå§‹åŒ–å‘é‡ï¼šéšæœºç”Ÿæˆ (12 bytes)</li>
                    <li>åŠ å¯†æµç¨‹ï¼šæ•°å­—å¯†é’¥ â†’ SHA-256 â†’ 32å­—èŠ‚AESå¯†é’¥ â†’ AES-GCMåŠ å¯†
                    <li>æ•°æ®æ ¼å¼ï¼šBase64ç¼–ç ï¼ˆä¾¿äºä¼ è¾“å’Œå­˜å‚¨ï¼‰</li>
                    <li>æ‰€æœ‰æ“ä½œåœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œæ•°æ®ä¸ä¼šä¸Šä¼ æœåŠ¡å™¨</li>
                </ul>
            </div>

            <!-- å¯†é’¥è¾“å…¥ -->
            <div class="key-section">
                <label for="keyInput">ğŸ”‘ æ•°å­—å¯†é’¥ (ä»…æ”¯æŒæ•°å­—)</label>
                <div class="key-input-wrapper">
                    <input 
                        type="password" 
                        id="keyInput" 
                        class="key-input" 
                        placeholder="è¯·è¾“å…¥æ•°å­—å¯†é’¥ï¼Œä¾‹å¦‚ï¼š123456"
                        pattern="[0-9]*"
                        inputmode="numeric"
                    >
                    <button class="toggle-key-btn" onclick="toggleKeyVisibility()" title="æ˜¾ç¤º/éšè—å¯†é’¥">
                        <span id="toggleIcon">ğŸ‘ï¸</span>
                    </button>
                </div>
            </div>

            <!-- åŠ å¯†åŒºåŸŸ -->
            <div class="encrypt-section">
                <div class="section-title">
                    <span class="icon">ğŸ“</span>
                    åŠ å¯†åŒºåŸŸ
                </div>
                <div class="text-area-wrapper">
                    <textarea 
                        id="plainText" 
                        class="text-area" 
                        placeholder="è¯·è¾“å…¥è¦åŠ å¯†çš„æ–‡æœ¬å†…å®¹ï¼ˆæ”¯æŒä¸­è‹±æ–‡ï¼‰..."
                        oninput="updateCharCount('plain')"
                    ></textarea>
                    <div class="char-count" id="plainCharCount">0 å­—ç¬¦</div>
                </div>
            </div>

            <!-- æ“ä½œåŒº -->
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="encryptText()">
                    ğŸ”’ åŠ å¯†æ–‡æœ¬
                </button>
                <button class="btn btn-secondary" onclick="clearAll()">
                    ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰
                </button>
                <button class="btn btn-primary" onclick="decryptText()">
                    ğŸ”“ è§£å¯†æ–‡æœ¬
                </button>
            </div>

            <!-- åŠ å¯†ç»“æœ -->
            <div class="result-section">
                <div class="section-title">
                    <span class="icon">ğŸ”’</span>
                    åŠ å¯†ç»“æœ
                </div>
                <div class="result-box" id="encryptResult">
                    <span class="placeholder">åŠ å¯†ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</span>
                    <button class="copy-btn" id="copyEncryptBtn" style="display: none;" onclick="copyResult('encrypt')">
                        ğŸ“‹ å¤åˆ¶
                    </button>
                </div>
            </div>

            <div style="height: 2rem;"></div>

            <!-- è§£å¯†åŒºåŸŸ -->
            <div class="decrypt-section">
                <div class="section-title">
                    <span class="icon">ğŸ”“</span>
                    è§£å¯†åŒºåŸŸ
                </div>
                <div class="text-area-wrapper">
                    <textarea 
                        id="cipherText" 
                        class="text-area" 
                        placeholder="è¯·ç²˜è´´è¦è§£å¯†çš„å¯†æ–‡..."
                        oninput="updateCharCount('cipher')"
                    ></textarea>
                    <div class="char-count" id="cipherCharCount">0 å­—ç¬¦</div>
                </div>
            </div>

            <!-- è§£å¯†ç»“æœ -->
            <div class="result-section">
                <div class="section-title">
                    <span class="icon">âœ…</span>
                    è§£å¯†ç»“æœ
                </div>
                <div class="result-box" id="decryptResult">
                    <span class="placeholder">è§£å¯†ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</span>
                    <button class="copy-btn" id="copyDecryptBtn" style="display: none;" onclick="copyResult('decrypt')">
                        ğŸ“‹ å¤åˆ¶
                    </button>
                </div>
            </div>
        </div>

        <!-- é¡µè„š -->
        <div class="footer">
            <div class="footer-divider"></div>
            <div class="tips">
                <strong>ğŸ’¡ ä½¿ç”¨æç¤ºï¼š</strong><br>
                1. åŠ å¯†å’Œè§£å¯†å¿…é¡»ä½¿ç”¨ç›¸åŒçš„æ•°å­—å¯†é’¥<br>
                2. è¯·å¦¥å–„ä¿ç®¡æ‚¨çš„å¯†é’¥ï¼Œå¯†é’¥ä¸¢å¤±å°†æ— æ³•è§£å¯†<br>
                3. æ‰€æœ‰åŠ å¯†æ“ä½œå‡åœ¨æ‚¨çš„æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œæ•°æ®ç»ä¸ä¸Šä¼ <br>
                4. å»ºè®®ä½¿ç”¨è¾ƒé•¿ä¸”å¤æ‚çš„æ•°å­—å¯†é’¥ä»¥æé«˜å®‰å…¨æ€§
            </div>
            <div class="footer-divider"></div>
            <div>
                Â© 2024 Readevrythingâ„¢ | åŸºäº Web Crypto API | AES-GCM 256-bit<br>
                All Rights Reserved
            </div>
        </div>
    </div>

    <script>
        // ==================== å·¥å…·å‡½æ•° ====================
        
        // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
        function showToast(message, type = 'success') {
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }

            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // åˆ‡æ¢å¯†é’¥å¯è§æ€§
        function toggleKeyVisibility() {
            const keyInput = document.getElementById('keyInput');
            const toggleIcon = document.getElementById('toggleIcon');
            
            if (keyInput.type === 'password') {
                keyInput.type = 'text';
                toggleIcon.textContent = 'ğŸ™ˆ';
            } else {
                keyInput.type = 'password';
                toggleIcon.textContent = 'ğŸ‘ï¸';
            }
        }

        // æ›´æ–°å­—ç¬¦è®¡æ•°
        function updateCharCount(type) {
            const textarea = document.getElementById(type === 'plain' ? 'plainText' : 'cipherText');
            const countEl = document.getElementById(type === 'plain' ? 'plainCharCount' : 'cipherCharCount');
            countEl.textContent = `${textarea.value.length} å­—ç¬¦`;
        }

        // æ¸…ç©ºæ‰€æœ‰å†…å®¹
        function clearAll() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†…å®¹å—ï¼Ÿ')) {
                document.getElementById('plainText').value = '';
                document.getElementById('cipherText').value = '';
                document.getElementById('encryptResult').innerHTML = '<span class="placeholder">åŠ å¯†ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</span>';
                document.getElementById('decryptResult').innerHTML = '<span class="placeholder">è§£å¯†ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</span>';
                document.getElementById('encryptResult').classList.remove('has-content');
                document.getElementById('decryptResult').classList.remove('has-content');
                document.getElementById('copyEncryptBtn').style.display = 'none';
                document.getElementById('copyDecryptBtn').style.display = 'none';
                updateCharCount('plain');
                updateCharCount('cipher');
                showToast('å·²æ¸…ç©ºæ‰€æœ‰å†…å®¹', 'success');
            }
        }

        // å¤åˆ¶ç»“æœ
        async function copyResult(type) {
            const resultBox = document.getElementById(type === 'encrypt' ? 'encryptResult' : 'decryptResult');
            const text = resultBox.textContent.trim();
            
            try {
                await navigator.clipboard.writeText(text);
                showToast('å¤åˆ¶æˆåŠŸï¼', 'success');
            } catch (err) {
                // é™çº§æ–¹æ¡ˆ
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                showToast('å¤åˆ¶æˆåŠŸï¼', 'success');
            }
        }

        // ==================== åŠ å¯†è§£å¯†æ ¸å¿ƒå‡½æ•° ====================

        // å°†æ•°å­—å¯†é’¥é€šè¿‡SHA-256è½¬æ¢ä¸ºAESå¯†é’¥
        async function deriveKey(password) {
            const encoder = new TextEncoder();
            const passwordData = encoder.encode(password);
            
            // ä½¿ç”¨SHA-256ç”Ÿæˆå¯†é’¥
            const hashBuffer = await crypto.subtle.digest('SHA-256', passwordData);
            
            // å¯¼å…¥ä¸ºCryptoKey
            return await crypto.subtle.importKey(
                'raw',
                hashBuffer,
                { name: 'AES-GCM' },
                false,
                ['encrypt', 'decrypt']
            );
        }

        // åŠ å¯†æ–‡æœ¬
        async function encryptText() {
            const plainText = document.getElementById('plainText').value;
            const keyInput = document.getElementById('keyInput').value;

            // éªŒè¯è¾“å…¥
            if (!plainText.trim()) {
                showToast('è¯·è¾“å…¥è¦åŠ å¯†çš„æ–‡æœ¬ï¼', 'error');
                return;
            }

            if (!keyInput.trim()) {
                showToast('è¯·è¾“å…¥æ•°å­—å¯†é’¥ï¼', 'error');
                return;
            }

            if (!/^\d+$/.test(keyInput)) {
                showToast('å¯†é’¥å¿…é¡»ä¸ºçº¯æ•°å­—ï¼', 'error');
                return;
            }

            try {
                // æ´¾ç”Ÿå¯†é’¥
                const key = await deriveKey(keyInput);

                // ç”Ÿæˆéšæœºåˆå§‹åŒ–å‘é‡ (IV)
                const iv = crypto.getRandomValues(new Uint8Array(12));

                // åŠ å¯†
                const encoder = new TextEncoder();
                const encodedText = encoder.encode(plainText);
                
                const encryptedData = await crypto.subtle.encrypt(
                    {
                        name: 'AES-GCM',
                        iv: iv
                    },
                    key,
                    encodedText
                );

                // å°†IVå’ŒåŠ å¯†æ•°æ®åˆå¹¶
                const combined = new Uint8Array(iv.length + encryptedData.byteLength);
                combined.set(iv, 0);
                combined.set(new Uint8Array(encryptedData), iv.length);

                // è½¬æ¢ä¸ºBase64
                const base64 = btoa(String.fromCharCode(...combined));

                // æ˜¾ç¤ºç»“æœ
                const resultBox = document.getElementById('encryptResult');
                resultBox.textContent = base64;
                resultBox.classList.add('has-content');
                document.getElementById('copyEncryptBtn').style.display = 'block';

                showToast('åŠ å¯†æˆåŠŸï¼', 'success');
            } catch (error) {
                console.error('åŠ å¯†å¤±è´¥:', error);
                showToast('åŠ å¯†å¤±è´¥ï¼š' + error.message, 'error');
            }
        }

        // è§£å¯†æ–‡æœ¬
        async function decryptText() {
            const cipherText = document.getElementById('cipherText').value;
            const keyInput = document.getElementById('keyInput').value;

            // éªŒè¯è¾“å…¥
            if (!cipherText.trim()) {
                showToast('è¯·è¾“å…¥è¦è§£å¯†çš„å¯†æ–‡ï¼', 'error');
                return;
            }

            if (!keyInput.trim()) {
                showToast('è¯·è¾“å…¥æ•°å­—å¯†é’¥ï¼', 'error');
                return;
            }

            if (!/^\d+$/.test(keyInput)) {
                showToast('å¯†é’¥å¿…é¡»ä¸ºçº¯æ•°å­—ï¼', 'error');
                return;
            }

            try {
                // æ´¾ç”Ÿå¯†é’¥
                const key = await deriveKey(keyInput);

                // ä»Base64è§£ç 
                const combined = Uint8Array.from(atob(cipherText), c => c.charCodeAt(0));

                // åˆ†ç¦»IVå’ŒåŠ å¯†æ•°æ®
                const iv = combined.slice(0, 12);
                const encryptedData = combined.slice(12);

                // è§£å¯†
                const decryptedData = await crypto.subtle.decrypt(
                    {
                        name: 'AES-GCM',
                        iv: iv
                    },
                    key,
                    encryptedData
                );

                // è§£ç æ–‡æœ¬
                const decoder = new TextDecoder();
                const plainText = decoder.decode(decryptedData);

                // æ˜¾ç¤ºç»“æœ
                const resultBox = document.getElementById('decryptResult');
                resultBox.textContent = plainText;
                resultBox.classList.add('has-content');
                document.getElementById('copyDecryptBtn').style.display = 'block';

                showToast('è§£å¯†æˆåŠŸï¼', 'success');
            } catch (error) {
                console.error('è§£å¯†å¤±è´¥:', error);
                showToast('è§£å¯†å¤±è´¥ï¼šå¯†é’¥é”™è¯¯æˆ–å¯†æ–‡æŸåï¼', 'error');
            }
        }

        // ==================== é”®ç›˜å¿«æ·é”® ====================
        
        document.addEventListener('keydown', function(event) {
            // Ctrl/Cmd + Enter: åŠ å¯†
            if ((event.ctrlKey || event.metaKey) && event.key === 'Enter') {
                if (document.activeElement === document.getElementById('plainText')) {
                    event.preventDefault();
                    encryptText();
                } else if (document.activeElement === document.getElementById('cipherText')) {
                    event.preventDefault();
                    decryptText();
                }
            }
            
            // Ctrl/Cmd + K: æ¸…ç©º
            if ((event.ctrlKey || event.metaKey) && event.key === 'k') {
                event.preventDefault();
                clearAll();
            }
        });

        // ==================== åˆå§‹åŒ– ====================
        
        // æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ
        if (!window.crypto || !window.crypto.subtle) {
            showToast('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒWeb Crypto APIï¼è¯·ä½¿ç”¨ç°ä»£æµè§ˆå™¨ã€‚', 'error');
        }

        // æç¤ºç”¨æˆ·
        console.log('%cğŸ” Text Encryption System', 'color: #6366f1; font-size: 20px; font-weight: bold;');
        console.log('%cAlgorithm: AES-GCM 256-bit', 'color: #8b5cf6; font-size: 14px;');
        console.log('%cKey Derivation: SHA-256', 'color: #8b5cf6; font-size: 14px;');
        console.log('%cAll operations are performed locally in your browser.', 'color: #10b981; font-size: 14px;');
    </script>
</body>
</html>
